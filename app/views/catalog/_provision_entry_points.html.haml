- if params[:provisioning_entry_point_type] && params[:provisioning_entry_point_type] != "nil"
  - url = url_for(:id => "#{@edit[:rec_id] || "new"}",
    :action => @edit[:new][:service_type] == "composite" ? "st_form_field_changed" : "atomic_form_field_changed")

  - if params[:provisioning_entry_point_type] == "embedded_workflows"
    = hidden_div_if(@edit, :id => "provision_entry_workflows") do
      = render(:partial => 'embedded_workflows_modal', :locals => {:field_name => :fqname, :entry_point => "provision_entry_workflows"})
    - modal = {:open => "miqShowEmbededdedWorkflowsModal('provision_entry_workflows'); miqButtons('hide', 'automate');",:close => "miqAjax('#{url_for_only_path(:action => 'ae_tree_select_discard', :typ => 'provision')}');"}
  - elsif params[:provisioning_entry_point_type] == "embedded_automate"
    - modal = {:open => "miqShowAE_Tree('provision'); miqButtons('hide', 'automate');", :close => "miqAjax('#{url_for_only_path(:action => 'ae_tree_select_discard', :typ => 'provision')}');"}
  
  .col-md-12{:title => @edit[:new][:fqname], :style => "padding: 3px;"}
    .input-group
      = text_field_tag("fqname",
                        @edit[:new][:fqname],
                        :class             => "form-control",
                        "data-miq_observe" => {:interval => '.5', :url => url}.to_json)
      %span.input-group-btn
        #fqname_div
          %button.btn.btn-default{"onclick" => modal[:open],
                                  "title"   => _('Click to select Provisioning Entry Point')}
            %i.ff.ff-load-balancer
          %button.btn.btn-default{"id"           => "fqname_remove",
                                  "onclick"      => modal[:close],
                                  "title"        => _('Remove this Provisioning Entry Point'),
                                  "data-confirm" => _("Are you sure you want to remove this Provisioning Entry Point?"),
                                  "disabled"     => @edit[:new][:fqname].nil?}
            %i.pficon.pficon-close
      %span.input-group-addon{:style => "visibility:hidden"}
