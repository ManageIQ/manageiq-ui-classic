- url = url_for_only_path(:action => 'form_field_changed', :id => (@edit[:rpt_id] || 'new'))
#columns_div
  = form_tag({:action => 'create',
              :id     => "report_columns_form"},
             :class  => "form-horizontal",
             :method => :post) do
    %h3
      = _('Configure Report Columns')
    .form-group
      %label.control-label.col-md-2
        = _('* Base the report on')
      .col-md-8
        = select_tag('chosen_model',
          options_for_select(@edit[:models].sort, @edit[:new][:model]),
          :multiple              => false,
          "data-live-search"     => "true",
          :class                 => "selectpicker")
        :javascript
          miqInitSelectPicker();
          miqSelectPickerEvent('chosen_model', '#{url}', {beforeSend: true, complete: true});
    - if model_report_type(@edit[:new][:model]) == :performance
      = render :partial => "form_columns_performance"
    - elsif model_report_type(@edit[:new][:model]) == :trend
      = render :partial => "form_columns_trend"
    - unless model_report_type(@edit[:new][:model]) == :trend
      = render :partial => "column_lists"
    %strong
      = _('* Caution: Changing these fields will clear all selected values below them!')
    %hr
      %h3
        = _('Report Creation Timeout')
      .form-horizontal
        - opts = [["<#{_('System Default')} (#{distance_of_time_in_words(MiqReport.default_queue_timeout)})>"]] + (1..6).map { |i| [n_('%{number} Hour', '%{number} Hours', i) % {:number => i}, i.hours] }
        = react('ReportCreationTimeout', { :url => url, :opts => opts, :timeout => @edit[:new][:queue_timeout] })
